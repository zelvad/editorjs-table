{"version":3,"sources":["webpack://Table/webpack/universalModuleDefinition","webpack://Table/webpack/bootstrap","webpack://Table/./node_modules/css-loader/lib/css-base.js","webpack://Table/./node_modules/style-loader/lib/addStyles.js","webpack://Table/./src/img/line-remove.svg","webpack://Table/./src/img/chevron-down.svg","webpack://Table/./src/plugin.js","webpack://Table/./src/styles/table-constructor.scss?d91f","webpack://Table/./src/styles/table-constructor.scss","webpack://Table/./node_modules/style-loader/lib/urls.js","webpack://Table/./src/styles/table.scss?5c6f","webpack://Table/./src/styles/table.scss","webpack://Table/./src/img/toolboxIcon.svg","webpack://Table/./src/img/border.svg","webpack://Table/./src/resize.js","webpack://Table/./src/selectLine.js","webpack://Table/./src/createLine.js","webpack://Table/./src/cellMenu.js","webpack://Table/./src/shortcuts.js","webpack://Table/./src/table.js","webpack://Table/./src/documentUtils.js","webpack://Table/./src/addLine.js","webpack://Table/./src/tableConstructor.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","TableConstructor","require","svgIcon","borderIcon","Table","data","config","api","readOnly","borderActive","toggleBorderButton","classList","toggle","_CSS","settingsButtonActive","_tableConstructor","_table","_element","withBorder","input","settingsButton","settings","addEventListener","event","clipText","clipboardData","getData","br","mark","icon","title","tags","htmlElement","toolsContent","table","colgroup","rows","row","rowData","cells","cell","innerHTML","colspan","colSpan","rowspan","rowSpan","display","bgColor","backgroundColor","isHeader","tagName","alignment","textAlign","querySelectorAll","col","span","width","textContent","trim","holder","add","dataset","active","toggleBorder","setTimeout","tableDraw","Array","from","cellsLenght","getAttribute","innerText","colSpanTotal","parseInt","append","newConstructor","_container","replaceWith","str","dom","locals","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test","CSS","Resize","items","body","columnCount","parentCellColIndex","closest","cellIndex","resizeStickIndex","startX","clientX","resizeStick","offsetWidth","isLastResizeStick","getWidthCols","w1","w2","widthFirst","widthSecond","cursor","preventDefault","stopPropagation","move","delta","getCols","first","second","cols","children","getBoundingClientRect","Number","parseFloat","parseWidth","x","init","onDrag","onDragEnd","elem","onDragStart","SelectLine","contains","_getDirection","tr","_getIndex","td","offsetParent","rowIndex","direction","deselectCells","selectColumn","highlightColSelectLines","_focusFirstSelecedCell","selectedCols","selectedRows","_v","selectRow","highlightRowSelectLines","removeButton","_createLineRemoveButton","className","_onClick","_onMouseEnter","_onMouseLeave","colIndexes","includes","button","_placeLineRemoveButton","rowIndexes","line","visibility","TableCSS","inputField","focus","lineRemoveButton","iconContainer","lineRemove","removeColumn","removeRow","hideLineRemoveButton","selectedLines","offsetLeft","totalWidth","reduce","initialValue","left","top","selectedLine","startY","offsetTop","totalHeight","offsetHeight","CreateLine","plusButton","onClick","getDirection","getIndex","addColumn","addRow","COLORS","CellMenu","_colors","colors","_init","_fillCellMenu","openCellMenuButton","iconBox","chevronDown","_handleMouseDown","_handleCellMenuButtonClick","container","option","i18n","mergeOption","mergeCells","unmergeOption","unmerge","addColumnOnRight","addRowBelow","focusedCell","selectedCell","colorOption","scrollY","Math","floor","colorPalette","colorBlock","color","_hideCellMenu","toggleRowHeaderOption","toggleFirstRowHeader","toggleColHeaderOption","toggleFirstColHeader","block","_setAlignment","align","blocks","groupBlock","nameBlock","group","headerGroup","_createCellGroup","_createToggleFirstRowHeaderButton","_createToggleFirstColHeaderButton","manageGroup","_createAddColumnOnRightButton","_createAddRowBelow","_createMergeButton","_createUnmergeButton","_createRowRemoveButton","_createColRemoveButton","styleGroup","_createColorPickerButton","alignmentGroup","_createAlignmentCenterButton","_createAlignmentLeftButton","_createAlignmentRightButton","_cellMenuInner","right","isMergePossible","checkIfMergePossible","isCurrentCellMerged","isToggleRowHeaderPossible","isToggleColHeaderPossible","menuWidth","windowWidth","innerWidth","isRowHeaderOn","rowHeaderOn","isColHeaderOn","colHeaderOn","disabled","cellMenuInner","cellMenu","_catchClickEventDelegation","_changeCellColor","_showColorPalette","_hideColorPalette","Shortcuts","_isComposingKorean","execCommand","isFirstCell","isAtLeftEnd","leftCell","caret","setToPreviousBlock","searchMainMergedCell","caretPosition","getCaretCharacterOffsetWithin","upperCell","upperCellInput","getPropertyValue","setToNextBlock","belowCell","belowCellInput","isComposing","containerReadOnly","wrapper","area","selected","y","resize","createElem","selectLine","fillButtons","arr","CSSSelectLine","elem1","_numberOfColumns","_numberOfRows","_createTableWrapper","visibleCells","createLine","shortcuts","_hangEvents","dehighlightSelectLines","newRow","insertRow","isFirstRow","isSecondRow","removeButtons","newCell","insertCell","_fillCell","contentEditable","turnTdIntoTh","updateButtons","insertCol","celSpanCount","isSelectedCellMerged","edgeIndex","fillCell","cellInColumn","isInvisibleCell","isMainMergedCell","hideCell","mainMergedCell","isOnSameRowWithMainCell","colIndex","find","mainCell","mainCellRowIndex","mainCellColindex","mainCellMaxRowIndex","mainCellMaxColIndex","k","showHiddenCell","deleteCell","_removeInvisibleRows","removeCol","_fillRow","isFirstColumn","isOnSameColumnWithMainCell","selectedRow","cellInUpperRow","everyCell","selectedCells","topLeftCell","bottomRightCell","everySelectedCells","visibleSelectedCells","firstRow","turnThIntoTd","_selectedCell","invisibleRows","every","_createContentEditableArea","_focusEditField","_blurEditField","_shortcutKeys","_mouseDownOnCell","_mouseEnterInDetectArea","CellMenuCSS","shiftKey","handleShiftTabKeyPress","handleArrowDownKeyPress","handleArrowUpKeyPress","handleTabKeyPress","handleEnterKeyPress","startRowIndex","startColIndex","currentCell","handleMouseMove","cellBelowMousePointer","elementFromPoint","clientY","currentRowIndex","currentColIndex","selectCells","isLastCellMerged","additionalRow","additionalCol","cellsInRow","isEveryRowSelected","isEveryColSelected","handleMouseUp","removeEventListener","rect","side","coords","x1","sizeArea","x2","y1","y2","getSideByCoords","pageYOffset","pageXOffset","bottom","pageX","pageY","dispatchEvent","CustomEvent","detail","bubbles","_isNotMissed","cssClasses","th","replaceChild","setProperty","removeProperty","removeAttribute","element","sel","caretOffset","doc","ownerDocument","win","defaultView","parentWindow","getSelection","rangeCount","range","getRangeAt","preCaretRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","selection","textRange","createRange","preCaretTextRange","createTextRange","moveToElementText","setEndPoint","text","colSpanCount","HTMLCollection","AddLine","addRowButton","addColumnButton","editor","_addLine","_drawTable","console","error","createAddRowButton","createAddColButton","isDataValid","isArray","contentRows","contentCols","configRows","configCols","drawTableFromData"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Table\"] = factory();\n\telse\n\t\troot[\"Table\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"20\\\" width=\\\"20\\\"><path d=\\\"m10 11.396-3.938 3.937q-.291.292-.687.282-.396-.011-.687-.303-.292-.291-.292-.697 0-.407.292-.698L8.604 10 4.667 6.062q-.292-.291-.282-.697.011-.407.303-.698.291-.292.697-.292.407 0 .698.292L10 8.604l3.938-3.937q.291-.292.697-.292.407 0 .698.292.292.291.292.698 0 .406-.292.697L11.396 10l3.937 3.938q.292.291.292.687 0 .396-.292.687-.291.292-.698.292-.406 0-.697-.292Z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"20\\\" width=\\\"20\\\"><path d=\\\"M10 12.458q-.167 0-.323-.062-.156-.063-.302-.208L5.604 8.417q-.25-.25-.229-.625.021-.375.25-.604.271-.271.625-.261.354.011.604.261L10 10.354l3.167-3.166q.25-.25.593-.25.344 0 .615.27.25.25.25.615t-.25.615l-3.75 3.75q-.146.145-.302.208-.156.062-.323.062Z\\\"></path></svg>\"","const TableConstructor = require(\"./tableConstructor\").TableConstructor\nconst svgIcon = require(\"./img/toolboxIcon.svg\")\nconst borderIcon = require(\"./img/border.svg\")\n\n/**\n *  테이블 플러그인 클래스\n *\n *  @typedef {object} TableData - object with the data transferred to form a table\n *  @property {string[][]} content - two-dimensional array which contains table content\n */\nclass Table {\n  /**\n   * Notify core that read-only mode is supported\n   *\n   * @returns {boolean}\n   */\n  static get isReadOnlySupported() {\n    return true\n  }\n\n  /**\n   * Allow to press Enter inside the CodeTool textarea\n   *\n   * @returns {boolean}\n   * @public\n   */\n  static get enableLineBreaks() {\n    return true\n  }\n\n  /**\n   * Sanitizer rules\n   */\n  static get sanitize() {\n    return {\n      br: true,\n      mark: true,\n    }\n  }\n\n  /**\n   * Get Tool toolbox settings\n   * icon - Tool icon's SVG\n   * title - title to show in toolbox\n   *\n   * @returns {{icon: string, title: string}}\n   */\n  static get toolbox() {\n    return {\n      icon: svgIcon,\n      title: \"Table\",\n    }\n  }\n\n  /**\n   * Render plugin`s main Element and fill it with saved data\n   *\n   * @param {TableData} data — previously saved data\n   * @param {object} config - user config for Tool\n   * @param {object} api - Editor.js API\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor({ data, config, api, readOnly }) {\n    this.api = api\n    this.readOnly = readOnly\n\n    this.config = config\n    this.api = api\n    this.readOnly = readOnly\n\n    this._tableConstructor = new TableConstructor(data, config, api, readOnly)\n\n    this._CSS = {\n      input: \"tc-table__inp\",\n      settingsButton: this.api.styles.settingsButton,\n      settingsButtonActive: this.api.styles.settingsButtonActive,\n    }\n\n    this.borderActive = data.settings?.withBorder\n\n    document.addEventListener('paste', (event) => {\n      window.clipText = event.clipboardData.getData('text/html')\n    })\n  }\n\n  /**\n   * Return Tool's view\n   *\n   * @returns {HTMLDivElement}\n   * @public\n   */\n  render() {\n    return this._tableConstructor.htmlElement\n  }\n\n  /**\n   * Extract Tool's data from the view\n   *\n   * @param {HTMLElement} toolsContent - Tool HTML element\n   *\n   * @returns {TableData} - saved data\n   */\n  save(toolsContent) {\n    const table = toolsContent.querySelector(\"table\")\n    const colgroup = []\n    const rows = []\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const rowData = []\n\n      for (let j = 0; j < row.cells.length; j++) {\n        const cell = row.cells[j]\n        const data = {\n          content: cell.querySelector(\".\" + this._CSS.input).innerHTML,\n          colspan: cell.colSpan,\n          rowspan: cell.rowSpan,\n          display: cell.style.display === \"none\" ? false : true,\n          bgColor: cell.style.backgroundColor,\n          isHeader: cell.tagName === \"TH\",\n          alignment: cell.style.textAlign || 'left',\n        }\n\n        rowData.push(data)\n      }\n\n      rows.push(rowData)\n    }\n\n    table\n        .querySelectorAll(\"col\")\n        .forEach((col) => {\n          colgroup.push({\n            span: col.span,\n            width: col.style.width,\n          })\n        })\n\n    return {\n      rows,\n      colgroup,\n    }\n  }\n\n  /**\n   * @private\n   * @param {HTMLElement} input - input field\n   * @returns {boolean}\n   */\n  _isEmpty(input) {\n    return !input.textContent.trim()\n  }\n\n  toggleBorder = () => {\n    this.borderActive = !this.borderActive\n    this.toggleBorderButton.classList.toggle(this._CSS.settingsButtonActive, this.borderActive)\n    this._tableConstructor._table._element.classList.toggle(\n      this._tableConstructor._CSS.withBorder,\n      this.borderActive\n    )\n  }\n\n  /**\n   * Create Block's settings block\n   *\n   * @returns {HTMLElement}\n   */\n  renderSettings() {\n    const holder = document.createElement(\"DIV\")\n\n    /** Add border toggle */\n    const toggleBorderButton = document.createElement(\"SPAN\")\n\n    toggleBorderButton.classList.add(this._CSS.settingsButton)\n\n    /**\n     * Highlight current level button\n     */\n    if (this.borderActive) {\n      toggleBorderButton.classList.add(this._CSS.settingsButtonActive)\n    }\n\n    /**\n     * Add SVG icon\n     */\n    toggleBorderButton.innerHTML = borderIcon\n\n    /**\n     * Save level to its button\n     */\n    toggleBorderButton.dataset.active = this.borderActive\n\n    /**\n     * Set up click handler\n     */\n    toggleBorderButton.addEventListener(\"click\", () => {\n      this.toggleBorder()\n    })\n\n    /**\n     * Append settings button to holder\n     */\n    // holder.appendChild(toggleBorderButton);\n\n    /**\n     * Save settings buttons\n     */\n    this.toggleBorderButton = toggleBorderButton\n\n    return holder\n  }\n\n  static get pasteConfig() {\n    return { tags: ['TABLE', 'TR', 'TH', 'TD'] };\n  }\n\n  onPaste(event) {\n    setTimeout(() => {\n      const tableDraw = document.createElement('div');\n\n      tableDraw.innerHTML = window.clipText;\n\n      if (window.hasOwnProperty('clipText')) {\n        const table = tableDraw.querySelector('table');\n\n        /** Get all rows from the table */\n        const rows = Array.from(table.querySelectorAll('tr'));\n\n        let cellsLenght = 0;\n\n        /** Generate a content matrix */\n        const content = rows.map((row) => {\n          /** Get cells from row */\n          const cells = Array.from(row.querySelectorAll('th, td'))\n\n          if (cells.length > cellsLenght) {\n            cellsLenght = cells.length\n          }\n\n          /** Return cells content */\n          return cells.map((cell) => {\n            return {\n              alignment: 'left',\n              bgColor: cell.style.backgroundColor || '',\n              colspan: cell.getAttribute('colspan') || 1,\n              content: cell.innerText,\n              display: true,\n              isHeader: cell.tagName === 'TH',\n              rowspan: 1,\n            };\n          });\n        })\n            .filter((row) => row.length)\n            .map((row) => {\n              if (row.length >= cellsLenght) {\n                return row;\n              }\n\n              let colSpanTotal = 0;\n\n              row.forEach((cell) => {\n                colSpanTotal += cell.colspan;\n              });\n\n              if (colSpanTotal >= cellsLenght) {\n                return row;\n              }\n\n              for (let i = row.length; i < cellsLenght; i++) {\n                row.push({\n                  alignment: 'left',\n                  bgColor: '',\n                  colspan: 1,\n                  content: '',\n                  display: true,\n                  isHeader: false,\n                  rowspan: 1,\n                });\n              }\n\n              return row;\n            })\n            .map((row) => {\n              let colSpanTotal = 0;\n\n              row.forEach((cell) => {\n                colSpanTotal += parseInt(cell.colspan);\n              });\n\n              if (row.length < colSpanTotal) {\n                const append = colSpanTotal - row.length;\n\n                for (let i = 0; i < append; i++) {\n                  row.push({\n                    alignment: 'left',\n                    bgColor: '',\n                    colspan: 1,\n                    content: '',\n                    display: false,\n                    isHeader: false,\n                    rowspan: 1,\n                  });\n                }\n              }\n\n              return row;\n            })\n\n        const colgroup = Array\n            .from(table.querySelectorAll('col'))\n            .map(() => {\n              return {\n                span: 1,\n                width: '', // col.getAttribute('width') || '',\n              }\n            })\n\n        if (! colgroup.length) {\n          for (let i = 0; i < cellsLenght; i++) {\n            colgroup.push({\n              span: 1,\n              width: '',\n            });\n          }\n        }\n\n        const newConstructor = new TableConstructor({\n          colgroup: colgroup,\n          rows: content\n        }, this.config, this.api, this.readOnly)\n\n        /** Update table block */\n        this._tableConstructor._container.replaceWith(newConstructor.htmlElement)\n        this._tableConstructor = newConstructor\n      }\n    }, 100)\n  }\n\n  stringToHtml(str) {\n    let dom = document.createElement('div');\n    dom.innerHTML = str;\n\n    return dom;\n  };\n}\n\nmodule.exports = Table\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tc-editor{padding:40px 10px 10px 10px;position:relative;box-sizing:content-box;width:100%;left:-10px}.tc-editor__readonly{margin-bottom:0}.tc-editor .table-toolbar{position:absolute;bottom:-60px;left:30px;display:flex;flex-direction:row;align-items:center;background-color:#fff;box-shadow:0px 0px 10px #e6e6e6;border-radius:4px;width:87%;height:40px;padding:8px 16px;color:#000}.tc-editor .table-toolbar__button{border:none;background:none;border-radius:4px;font-size:12px;color:#797979;width:40px;height:40px;background-color:#fff;transition:80ms cubic-bezier(0.33, 1, 0.68, 1);transition-property:color,background-color,box-shadow,border-color;cursor:pointer}.tc-editor .table-toolbar__button:hover{background-color:#f3f3f3;transition-duration:.1s}.tc-editor .table-toolbar__button:not(:last-child){margin-right:10px}\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ce-toolbar{z-index:11}.tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed}.tc-table col{min-width:50px}.tc-table tbody th{background-color:#f1f3f8;text-align:center;font-weight:bold}.tc-table__container{padding:40px 16px 16px 40px;margin:-24px 0 0 -24px;position:relative;overflow-x:auto;overflow-y:hidden}.tc-table__container_readonly{overflow-x:auto;overflow-y:hidden;padding:16px 0;margin:0}.tc-table__image{max-width:100%}.tc-table__with_border .tc-table__cell{border-color:#dbdbe2}.tc-table__wrap{position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__tr_remove::after,.tc-table__td_remove::after{height:100%;width:100%;border:1px solid #0065ff;content:\\\"\\\";position:absolute;left:-1px;top:-1px;bottom:0px;z-index:12;display:inline-block;pointer-events:none;box-sizing:content-box}.tc-table__cell{border:1px solid rgba(0,0,0,0);padding:0;vertical-align:top;position:relative}.tc-table__add_row_button,.tc-table__add_column_button{background-color:#ececec;position:absolute;z-index:1;cursor:pointer;border:1px solid #000;display:flex;align-items:center;justify-content:center;font-weight:bold;transition:opacity .2s ease;box-sizing:border-box;opacity:0}.tc-table__add_row_button:after,.tc-table__add_column_button:after{content:\\\"+\\\";color:#4a525f}.tc-table__add_row_button:hover,.tc-table__add_column_button:hover{background-color:#4a525f;opacity:1}.tc-table__add_row_button:hover:after,.tc-table__add_column_button:hover:after{color:#fff}.tc-table__add_column_button{height:13px;bottom:-4px;width:calc(100% - 36px)}.tc-table__add_row_button{height:calc(100% - 66px);width:12px;right:-5px;top:40px}.tc-table__add_row,.tc-table__add_column{flex-direction:column;left:-10px;top:-38px;position:absolute;align-items:center;display:flex;height:4000px;width:20px;pointer-events:none}.tc-table__add_row>div:first-child,.tc-table__add_column>div:first-child{width:20px;height:20px;align-items:center;justify-content:center;display:flex;pointer-events:all}.tc-table__add_row>div:first-child:before,.tc-table__add_column>div:first-child:before{content:\\\"\\\";display:block;width:4px;height:4px;border-radius:50%;background-color:#c1c7d0}.tc-table__add_row>div:first-child:after,.tc-table__add_column>div:first-child:after{content:\\\"+\\\";width:20px;height:20px;background-color:#72b6ec;border-radius:50%;color:#fff;text-align:center;cursor:pointer;display:none;align-items:center;justify-content:center;font-weight:bold;padding-bottom:1px}.tc-table__add_row>div:first-child:hover:before,.tc-table__add_column>div:first-child:hover:before{display:none}.tc-table__add_row>div:first-child:hover:after,.tc-table__add_column>div:first-child:hover:after{display:flex}.tc-table__add_row>div:first-child:hover~div,.tc-table__add_column>div:first-child:hover~div{opacity:1}.tc-table__add_row>div:last-child,.tc-table__add_column>div:last-child{width:3px;height:100%;background-color:#72b6ec;margin-top:18px;opacity:0}.tc-table__add_row{flex-direction:row;left:-37px;top:-11px;justify-content:center;height:20px;width:4000px}.tc-table__add_row>div:last-child{width:100%;height:3px;margin-left:17px;margin-top:0}.tc-table__add_column_end{left:auto;right:-9px}.tc-table__add_row_end{top:auto;bottom:-9px}.tc-table__resize_column{position:absolute;top:-1px;height:100%;left:-2px;width:3px;background-color:#4a525f;cursor:col-resize;z-index:1;opacity:0}.tc-table__select_line_col,.tc-table__select_line_row{position:absolute;height:10px;top:-16px;left:-1px;right:-1px;background-color:#f4f5f7;border:1px solid #c1c7d0;cursor:pointer}.tc-table__select_line_col:hover,.tc-table__select_line_row:hover{background-color:#0065ff}.tc-table__select_line_row{height:auto;width:10px;left:-16px;top:-1px;bottom:-1px;right:auto}.tc-table__select_line_remover{position:absolute;top:0px;left:0px;visibility:hidden;width:20px;height:20px;line-height:1;border:none;padding:0;background:none;cursor:pointer;border-radius:4px;background-color:#f4f5f7;transition:background .1s ease-out 0s,box-shadow .15s cubic-bezier(0.47, 0.03, 0.49, 1.38) 0s}.tc-table__select_line_remover div{width:100%;height:100%}.tc-table__select_line_remover svg{color:#45526c;fill:#45526c}.tc-table__select_line_remover:hover{background-color:#ff5630}.tc-table__select_line_remover:hover svg{color:#fff;fill:#fff}.tc-table__select_line__selected{background-color:#0065ff}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table__option_button{position:absolute;top:4px;right:4px;visibility:hidden;width:22px;height:20px;border:none;background:none;background-color:#fff;border-radius:3px;padding:0;padding:2px;cursor:pointer;z-index:99}.tc-table__option_button__inner_box{border-radius:3px;background-color:#f4f5f7;width:100%;height:100%;position:relative}.tc-table__option_button__inner_box:hover{background-color:#e2e4e9}.tc-table__option_button__inner_box:active{background-color:rgba(179,212,255,.6)}.tc-table__option_button__inner_box:active svg{color:#0052cc;fill:#0052cc}.tc-table__option_button__inner_box.activated{background-color:#45526c}.tc-table__option_button__inner_box.activated svg{color:#fff;fill:#fff}.tc-table__option_button__inner_box svg{position:absolute;top:45%;left:50%;transform:translate(-50%, -50%);color:#45526c;fill:#45526c}.tc-table__option_table{position:absolute;top:0px;left:0px;color:var(--ds-text, #091e42);background-color:var(--ds-surface-overlay, #ffffff);border-radius:3px;box-shadow:rgba(9,30,66,.25) 0px 4px 8px -2px,rgba(9,30,66,.31) 0px 0px 1px;box-sizing:border-box;overflow:auto;padding:4px 0px;max-height:90vh;min-width:180px;visibility:hidden;z-index:99}.tc-table__option_table__inner{box-sizing:border-box;appearance:none;border:none;display:flex;position:static;flex-direction:column;overflow:auto}.tc-table__option_table__inner__option{display:flex;justify-content:space-between;box-sizing:border-box;width:100%;min-height:var(--ds-scale-500, 30px);margin:var(--ds-scale-0, 0px);padding:var(--ds-scale-100, 8px) var(--ds-scale-250, 20px);-webkit-box-align:center;align-items:center;border:0px;font-size:14px;outline:0px;text-decoration:none;user-select:none;background-color:rgba(0,0,0,0);color:currentcolor;cursor:pointer}.tc-table__option_table__inner__option:hover{background-color:#e2e4e9}.tc-table__option_table__inner__option:active{background-color:rgba(179,212,255,.6)}.tc-table__option_table__inner__option:disabled{color:#e2e4e9;cursor:not-allowed}.tc-table__option_table__inner__option:disabled:hover{background-color:#fff}.tc-table__option_table__inner__option.color-option{position:relative}.tc-table__option_table__inner__option.toggle-row-header-option.row-header-on,.tc-table__option_table__inner__option.toggle-col-header-option.col-header-on{font-weight:bold}.tc-table__option_table__inner__option.toggle-row-header-option.row-header-on::after,.tc-table__option_table__inner__option.toggle-col-header-option.col-header-on::after{content:\\\"\\\\2714\\\\FE0F\\\"}.tc-table__color-palette{position:absolute;top:0px;left:0px;background-color:#fff;border-radius:3px;box-shadow:rgba(9,30,66,.25) 0px 4px 8px -2px,rgba(9,30,66,.31) 0px 0px 1px;box-sizing:border-box;overflow:auto;display:grid;grid-gap:10px;grid-template-columns:repeat(7, 25px);grid-template-rows:repeat(3, 25px);grid-auto-flow:inherit;padding:10px;z-index:100;visibility:hidden}.tc-table__color-palette .color-block{width:27px;height:27px;border:1px solid rgba(179,212,255,.6);border-radius:2px;box-sizing:border-box;margin:0;cursor:pointer}.tc-table__color-palette .color-block:hover{box-shadow:0px 0px 0px 1px #cae5ff}.tc-table .tc-table__cell.selected::after{height:100%;width:100%;border:1px solid #0065ff;background-color:rgba(51,159,255,.231372549);content:\\\"\\\";position:absolute;left:-1px;top:-1px;bottom:0px;z-index:12;display:inline-block;pointer-events:none;box-sizing:content-box}.tc-table__option_table{display:flex;flex-wrap:wrap;gap:12px;padding:10px;border:1px solid #c1c7d0;border-radius:8px;background:#f5f7fa}.tc-table__option_table__inner__option{padding:6px 12px;font-size:14px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s;background-color:#c1c7d0;margin-top:10px}.tc-table__option_table__inner__option:first-child{margin-top:0}.tc-table__option_table__inner__option:hover{background-color:#a8afbc}.table_cell_group{display:flex;align-items:start;gap:6px;padding:8px 12px;border:1px solid #c1c7d0;border-radius:6px;background:#e3e9f0;margin-top:10px;flex-direction:column}.table_cell_group:first-child{margin-top:0}.table_cell_group .tc-table__option_table__inner__option:first-child{margin-top:0}.table_cell_group span{font-weight:bold;font-size:14px;margin-bottom:5px}.table_cell_group .tc-table__option_table__inner__option{margin-top:0}\", \"\"]);\n\n// exports\n","module.exports = \"<svg width=\\\"18\\\" height=\\\"14\\\"><path d=\\\"M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z\\\"></path></svg>\"","module.exports = \"<svg width=\\\"18\\\" height=\\\"18\\\" viewBox=\\\"0 0 18 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M0 2V8V10V16V18H2H8H10H16H18V16V10V8V2V0H16H10H8H2H0V2ZM8 2L2 2V8H8L8 2ZM8 10H2V16H8L8 10ZM10 16V10H16V16H10ZM10 8V2L16 2V8H10Z\\\"></path></svg>\"","import { create } from \"./documentUtils\"\n\nconst CSS = {\n  resizedColumn: \"tc-table__resize_column\",\n}\n\nconst MIN_COL_WIDTH = 50\n\nexport class Resize {\n  constructor(table) {\n    this.table = table\n    this.resizeStick = null\n    this.resizeStickIndex = 0\n    this.isLastResizeStick = false\n    this.startX = 0\n    this.x = 0\n\n    this.init()\n  }\n\n  init() {\n    document.addEventListener(\"mousemove\", this.onDrag, false)\n    document.addEventListener(\"mouseup\", this.onDragEnd, false)\n  }\n\n  createElem(cell) {\n    if (!cell.querySelector(`.${CSS.resizedColumn}`)) {\n      const elem = create(\"div\", [CSS.resizedColumn])\n      elem.addEventListener(\"mousedown\", this.onDragStart, false)\n      cell.appendChild(elem)\n    }\n  }\n\n  getIndex = (e) => {\n    const items = this.table.body.querySelectorAll(`.${CSS.resizedColumn}`)\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === e.target) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  onDragStart = (e) => {\n    const columnCount = this.table.body.rows[0].cells.length\n    const parentCellColIndex = e.target.closest(\"td,th\").cellIndex\n    const resizeStickIndex = parentCellColIndex - 1\n\n    this.startX = e.clientX\n    this.resizeStick = e.target\n    this.resizeStickIndex = resizeStickIndex\n    this.width = this.table.body.offsetWidth\n\n    if (columnCount === parentCellColIndex + 1) {\n      this.isLastResizeStick = true\n    }\n\n    const [w1, w2] = this.getWidthCols()\n\n    // 왼쪽 셀 너비\n    this.widthFirst = w1\n    // 오른쪽 셀 너비\n    this.widthSecond = w2\n\n    document.body.style.cursor = \"col-resize\"\n\n    e.preventDefault && e.preventDefault()\n    e.stopPropagation && e.stopPropagation()\n  }\n\n  onDrag = (e) => {\n    if (this.resizeStick) {\n      this.move(e.clientX - this.startX)\n    }\n  }\n\n  onDragEnd = () => {\n    this.resizeStick = null\n    this.isLastResizeStick = false\n    document.body.style.cursor = \"auto\"\n  }\n\n  move = (delta) => {\n    const [first, second] = this.getCols()\n    const w1 = this.widthFirst + delta\n    const w2 = this.widthSecond - delta\n\n    if (w1 >= MIN_COL_WIDTH) {\n      first.style.width = `${w1}px`\n\n      if (w1 >= MIN_COL_WIDTH && w2 >= MIN_COL_WIDTH) {\n        second.style.width = `${w2}px`\n      }\n    }\n  }\n\n  getCols = () => {\n    const cols = this.table.colgroup.children\n    const first = cols[this.resizeStickIndex]\n    const second = cols[this.resizeStickIndex + 1]\n    return [first, second]\n  }\n\n  parseWidth = (col) => {\n    const width = col.style.width || col.getBoundingClientRect().width\n    return Number.parseFloat(width)\n  }\n\n  getWidthCols = () => {\n    const [first, second] = this.getCols()\n    return [this.parseWidth(first), this.parseWidth(second)]\n  }\n}\n","import { create } from \"./documentUtils\"\nimport { CSS as TableCSS } from \"./table\"\nimport lineRemove from \"./img/line-remove.svg\"\n\nexport const CSS = {\n  selectLineCol: \"tc-table__select_line_col\",\n  selectLineRow: \"tc-table__select_line_row\",\n  trRemove: \"tc-table__tr_remove\",\n  tdRemove: \"tc-table__td_remove\",\n  removeButton: \"tc-table__select_line_remover\",\n  selected: \"tc-table__select_line__selected\",\n}\n\nexport class SelectLine {\n  constructor(table) {\n    /**\n     * @private\n     */\n    this.table = table\n\n    this.removeButton = this._createLineRemoveButton()\n  }\n\n  /**\n   * 첫 번째 행,열에 Select Line 을 생성합니다.\n   *\n   * @param {HTMLTableCellElement} cell\n   * @param {Number} direction\n   */\n  createElem(cell, direction = 0) {\n    const className = direction === 0 ? CSS.selectLineCol : CSS.selectLineRow\n\n    if (!cell.querySelector(`.${className}`)) {\n      const elem = create(\"div\", [className])\n      elem.addEventListener(\"click\", this._onClick, false)\n      elem.addEventListener(\"mouseenter\", this._onMouseEnter, false)\n      elem.addEventListener(\"mouseleave\", this._onMouseLeave, false)\n      cell.appendChild(elem)\n    }\n  }\n\n  /**\n   *\n   * @param {Number[]} colIndexes\n   */\n  highlightColSelectLines(colIndexes) {\n    const colSelectLines = Array\n        .from(this.table.body.rows[0].cells)\n        .filter((cell) => colIndexes.includes(cell.cellIndex))\n        .map((cell) => cell.querySelector(\".\" + CSS.selectLineCol))\n\n    colSelectLines.forEach((button) => {\n      button.classList.add(CSS.selected)\n    })\n\n    this._placeLineRemoveButton(\"horizontal\")\n  }\n\n  /**\n   *\n   * @param {Number[]} rowIndexes\n   */\n  highlightRowSelectLines(rowIndexes) {\n    const rowSelectLines = Array.from(this.table.body.rows)\n      .filter((row) => rowIndexes.includes(row.rowIndex))\n      .map((row) => row.querySelector(\".\" + CSS.selectLineRow))\n\n    rowSelectLines.forEach((button) => {\n      button.classList.add(CSS.selected)\n    })\n\n    this._placeLineRemoveButton(\"vertical\")\n  }\n\n  dehighlightSelectLines() {\n    const selectLines = this.table.body.querySelectorAll(\n      `.${CSS.selectLineCol},.${CSS.selectLineRow}`\n    )\n\n    selectLines.forEach((line) => {\n      line.classList.remove(CSS.selected)\n    })\n  }\n\n  hideLineRemoveButton() {\n    this.removeButton.style.visibility = \"hidden\"\n  }\n\n  /**\n   * 선택된 줄의 첫 번째 셀을 포커스 합니다.\n   *\n   * @private\n   * @param {Number} direction\n   * @param {Number} index\n   * @returns\n   */\n  _focusFirstSelecedCell(direction, index) {\n    if (direction === 0) {\n      this.table.body.rows[0].cells[index].querySelector(\".\" + TableCSS.inputField).focus()\n      return\n    }\n\n    this.table.body.rows[index].cells[0].querySelector(\".\" + TableCSS.inputField).focus()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _createLineRemoveButton() {\n    const lineRemoveButton = create(\"button\", [CSS.removeButton])\n    lineRemoveButton.setAttribute('type', 'button');\n\n    const iconContainer = create(\"div\")\n\n    const removeSelectedLines = (event) => {\n      const button = event.target.closest(\".\" + CSS.removeButton)\n      const direction = button.dataset.direction\n\n      if (direction === \"horizontal\") {\n        const selectedCols = this.table.selectedCols\n\n        selectedCols.forEach((col, i) => {\n          this.table.removeColumn(col - i)\n        })\n\n        this.table.deselectCells()\n        return\n      }\n\n      if (direction === \"vertical\") {\n        const selectedRows = this.table.selectedRows\n\n        selectedRows.forEach((row, i) => {\n          this.table.removeRow(row - i)\n        })\n\n        this.table.deselectCells()\n        return\n      }\n    }\n\n    iconContainer.innerHTML = lineRemove\n\n    lineRemoveButton.appendChild(iconContainer)\n    lineRemoveButton.addEventListener(\"click\", removeSelectedLines.bind(this))\n    this.table.body.appendChild(lineRemoveButton)\n\n    return lineRemoveButton\n  }\n\n  /**\n   * 조건에 따라 삭제 버튼의 위치를 조정합니다.\n   *\n   * @private\n   * @param {String} direction\n   */\n  _placeLineRemoveButton(direction) {\n    const BORDER_WIDTH = 2\n    const isEveryCellSelected =\n      this.table.selectedCols.length === this.table.body.rows[0].cells.length &&\n      this.table.selectedRows.length === this.table.body.rows.length\n\n    if (isEveryCellSelected) {\n      this.hideLineRemoveButton()\n      return\n    }\n\n    if (direction === \"horizontal\") {\n      const selectedLines = Array.from(this.table.body.rows[0].querySelectorAll(\".\" + CSS.selected))\n      const startX = selectedLines[0].offsetParent.offsetLeft\n      const totalWidth = selectedLines.reduce(\n        (initialValue, line) => line.offsetWidth + BORDER_WIDTH + initialValue,\n        0\n      )\n\n      this.removeButton.style.left = `${startX + totalWidth / 2}px`\n      this.removeButton.style.top = \"-40px\"\n      this.removeButton.style.transform = \"translateX(-50%)\"\n      this.removeButton.style.visibility = \"visible\"\n      this.removeButton.setAttribute(\"data-direction\", direction)\n\n      return\n    }\n\n    if (direction === \"vertical\") {\n      const rows = Array.from(this.table.body.rows)\n      const selectedLines = []\n\n      rows.forEach((row) => {\n        if (row.cells.length !== 0) {\n          const selectedLine = row.cells[0].querySelector(\".\" + CSS.selected)\n\n          if (selectedLine) {\n            selectedLines.push(selectedLine)\n          }\n        }\n      })\n\n      const startY = selectedLines[0].offsetParent.offsetTop\n      const totalHeight = selectedLines.reduce(\n        (initialValue, line) => line.offsetHeight + BORDER_WIDTH + initialValue,\n        0\n      )\n\n      this.removeButton.style.top = `${startY + totalHeight / 2}px`\n      this.removeButton.style.left = \"-40px\"\n      this.removeButton.style.transform = \"translateY(-50%)\"\n      this.removeButton.style.visibility = \"visible\"\n      this.removeButton.setAttribute(\"data-direction\", direction)\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  _getDirection = (e) => {\n    if (e.target.classList.contains(CSS.selectLineCol)) return 0\n    return 1\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  _onMouseEnter = (e) => {\n    // 가로 줄\n    if (this._getDirection(e) === 0) {\n      const index = this._getIndex(e)\n\n      for (let i = 0; i < this.table.body.rows.length; i += 1) {\n        if (this.table.body.rows[i].children[index]) {\n          this.table.body.rows[i].children[index].classList.add(CSS.tdRemove)\n        }\n      }\n\n      return\n    }\n\n    const tr = e.target.closest(\"tr\")\n\n    Array.from(tr.cells).forEach((cell) => {\n      cell.classList.add(CSS.trRemove)\n    })\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  _onMouseLeave = (e) => {\n    if (e.target) {\n      if (this._getDirection(e) === 0) {\n        const tds = this.table.body.querySelectorAll(`.${CSS.tdRemove}`)\n        tds.forEach((td) => {\n          td.classList.remove(CSS.tdRemove)\n        })\n      } else {\n        const tr = e.target.closest(\"tr\")\n        Array.from(tr.cells).forEach((cell) => {\n          cell.classList.remove(CSS.trRemove)\n        })\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  _getIndex = (e) => {\n    const isHorizontal = e.target.classList.contains(CSS.selectLineCol)\n    const index = isHorizontal\n      ? e.target.offsetParent.cellIndex\n      : e.target.offsetParent.parentNode.rowIndex\n\n    return index\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  _onClick = (e) => {\n    const index = this._getIndex(e)\n    const direction = this._getDirection(e)\n\n    this.table.deselectCells()\n\n    if (direction === 0) {\n      this.table.selectColumn(index)\n      this.highlightColSelectLines([index])\n      this._focusFirstSelecedCell(direction, index)\n      this.table.selectedCols = [index]\n      this.table.selectedRows = Array.from({ length: this.table.body.rows.length }, (_v, i) => i)\n    } else {\n      this.table.selectRow(index)\n      this.highlightRowSelectLines([index])\n      this._focusFirstSelecedCell(direction, index)\n      this.table.selectedRows = [index]\n      this.table.selectedCols = Array.from(\n        { length: this.table.body.rows[0].cells.length },\n        (_v, i) => i\n      )\n    }\n  }\n}\n","import { create } from \"./documentUtils\"\n\nexport const CSS = {\n  addColumn: \"tc-table__add_column\",\n  addRow: \"tc-table__add_row\",\n}\n\nexport class CreateLine {\n  constructor(table) {\n    this.table = table\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} - the create col/row\n   */\n  createElem = (cell, direction = 0) => {\n    const className = [CSS.addColumn, CSS.addRow][direction]\n    if (!cell.querySelector(`.${className}`)) {\n      const plusButton = create(\"div\")\n      plusButton.addEventListener(\"click\", this.onClick)\n\n      const line = create(\"div\", [className], null, [plusButton, create(\"div\")])\n\n      cell.appendChild(line)\n      return line\n    }\n  }\n\n  getDirection = (elem) => {\n    if (elem.classList.contains(CSS.addColumn)) return 0\n    return 1\n  }\n\n  getIndex = (elem) => {\n    const items = this.table.body.querySelectorAll(`.${elem.className}`)\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === elem) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  onClick = (e) => {\n    const parent = e.target.parentNode\n    const direction = this.getDirection(parent)\n    const index = this.getIndex(parent)\n\n    if (direction === 0) {\n      this.table.addColumn(index)\n    } else {\n      this.table.addRow(index)\n    }\n  }\n}\n","import { create } from \"./documentUtils\"\nimport chevronDown from \"./img/chevron-down.svg\"\n\nconst COLORS = [\n  \"#ffffff\",\n  \"#e0ebfd\",\n  \"#eafbfe\",\n  \"#e8fbf0\",\n  \"#fefae8\",\n  \"#fcece7\",\n  \"#e9e6fd\",\n  \"#f4f5f7\",\n  \"#b9d4fb\",\n  \"#c1f3fd\",\n  \"#bbf3d3\",\n  \"#fcf0ba\",\n  \"#f5c0b0\",\n  \"#beb7ee\",\n  \"#b4bac4\",\n  \"#5f9af8\",\n  \"#93dfef\",\n  \"#7cd5a7\",\n  \"#f6c544\",\n  \"#f0957a\",\n  \"#978ed4\",\n]\n\nexport class CellMenu {\n  constructor(table, config, api) {\n    this.table = table\n    this._colors = config.colors || COLORS\n    this.api = api\n\n    /**\n     * FIXME: 테이블 셀 메뉴와 컬러 팔레트가 무한 생성되는 현상을 수정해야 합니다.\n     */\n    this._init()\n    this._fillCellMenu()\n  }\n\n  createElem(cell) {\n    const openCellMenuButton = create(\"button\", [CSS.openCellMenuButton])\n    const iconContainer = create(\"div\", [CSS.iconBox])\n\n    iconContainer.innerHTML = chevronDown\n\n    openCellMenuButton.appendChild(iconContainer)\n    openCellMenuButton.addEventListener(\"mousedown\", this._handleMouseDown.bind(this))\n    openCellMenuButton.addEventListener(\"click\", this._handleCellMenuButtonClick.bind(this))\n    cell.appendChild(openCellMenuButton)\n  }\n\n  _hideCellMenu(event) {\n    if (event.target.closest(\".\" + CSS.openCellMenuButton)) return\n\n    this.container.style.visibility = \"hidden\"\n\n    this.table.body.querySelectorAll(\".\" + CSS.iconBox).forEach((iconBox) => {\n      iconBox.classList.remove(\"activated\")\n    })\n  }\n\n  _createMergeButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Merge Cells\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.mergeOption)\n    option.addEventListener(\"click\", this.mergeCells.bind(this))\n\n    return option\n  }\n\n  _createUnmergeButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Divide Cell\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.unmergeOption)\n    option.addEventListener(\"click\", this.unmerge.bind(this))\n\n    return option\n  }\n\n  _createAddColumnOnRightButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Insert Column On Right\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", this.addColumnOnRight.bind(this))\n\n    return option\n  }\n\n  _createAddRowBelow() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Insert Row Below\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", this.addRowBelow.bind(this))\n\n    return option\n  }\n\n  _createColRemoveButton() {\n    const option = document.createElement(\"button\")\n\n    const removeSelectedCols = (event) => {\n      const focusedCell = this.selectedCell\n      const selectedCols = this.selectedCols\n\n      if (selectedCols.length === 0) {\n        this.removeColumn(focusedCell.cellIndex)\n        return\n      }\n\n      selectedCols.forEach((row, i) => {\n        this.removeColumn(row - i)\n      })\n    }\n\n    option.textContent = this.api.i18n.t(\"Remove Column\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", removeSelectedCols.bind(this))\n\n    return option\n  }\n\n  _createRowRemoveButton() {\n    const option = document.createElement(\"button\")\n\n    const removeSelectedRows = (event) => {\n      const focusedCell = this.selectedCell\n      const selectedRows = this.selectedRows\n\n      if (selectedRows.length === 0) {\n        this.removeRow(focusedCell.parentNode.rowIndex)\n        return\n      }\n\n      selectedRows.forEach((row, i) => {\n        this.removeRow(row - i)\n      })\n    }\n\n    // 삭제할 행을 표시해주는 기능을 추가한다\n    // https://stackoverflow.com/questions/49106088/changing-pseudo-element-style-from-javascript\n    const highlightCells = (event) => {\n      // const focusedCell = this.selectedCell;\n      // const selectedCells = this._table.querySelectorAll('.selected');\n      // if (selectedCells.length === 0) {\n      //   focusedCell.parentNode.classList.add(SelectLineCSS.trRemove);\n      //   return;\n      // }\n      // const topLeftRow = selectedCells[0].parentNode.rowIndex;\n      // const bottomRightRow = selectedCells[selectedCells.length - 1].parentNode.rowIndex;\n      // for (let i = topLeftRow; i <= bottomRightRow; i++) {\n      //   this._table.rows[i].classList.add(SelectLineCSS.trRemove);\n      // }\n    }\n\n    option.textContent = this.api.i18n.t(\"Remove Row\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", removeSelectedRows.bind(this))\n    // option.addEventListener(\"mouseenter\", highlightCells.bind(this))\n\n    return option\n  }\n\n  _createColorPickerButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Cell Color\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.colorOption)\n\n    option.addEventListener(\"mouseenter\", (event) => {\n      const { top, left } = option.getBoundingClientRect()\n      const scrollY = Math.floor(window.scrollY)\n      const { width } = this.colorPalette.getBoundingClientRect()\n\n      this.colorPalette.style.top = `${Math.floor(top) + scrollY}px`\n      this.colorPalette.style.left = `${left - width}px`\n      this.colorPalette.style.visibility = \"visible\"\n    })\n\n    option.addEventListener(\"mouseleave\", (event) => {\n      this.colorPalette.style.visibility = \"hidden\"\n    })\n\n    return option\n  }\n\n  _changeCellColor(event) {\n    if (event.target.closest(\".\" + CSS.colorBlock)) {\n      const color =\n        event.target.dataset.color === this._colors[0] ? null : event.target.dataset.color\n      const selectedRows = this.table.selectedRows\n      const selectedCols = this.table.selectedCols\n      const selectedCell = this.table.selectedCell\n\n      this.colorPalette.style.visibility = \"hidden\"\n      this._hideCellMenu(event)\n\n      if (!selectedRows.length && !selectedCols.length) {\n        selectedCell.style.backgroundColor = color\n        this.table.deselectCells()\n        return\n      }\n\n      for (let i = selectedRows[0]; i <= selectedRows[selectedRows.length - 1]; i++) {\n        for (let j = selectedCols[0]; j <= selectedCols[selectedCols.length - 1]; j++) {\n          const cell = this.table.body.rows[i].cells[j]\n          cell.style.backgroundColor = color\n        }\n      }\n\n      this.table.deselectCells()\n    }\n  }\n\n  _hideColorPalette() {\n    this.colorPalette.style.visibility = \"hidden\"\n  }\n\n  _showColorPalette() {\n    this.colorPalette.style.visibility = \"visible\"\n  }\n\n  _createToggleFirstRowHeaderButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Header Row\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.toggleRowHeaderOption)\n\n    option.addEventListener(\"click\", this.toggleFirstRowHeader.bind(this))\n\n    return option\n  }\n\n  _createToggleFirstColHeaderButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Header Column\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.toggleColHeaderOption)\n\n    option.addEventListener(\"click\", this.toggleFirstColHeader.bind(this))\n\n    return option\n  }\n\n  _createAlignmentCenterButton() {\n    const block = document.createElement(\"button\")\n\n    block.textContent = this.api.i18n.t(\"Text Center\")\n\n    block.classList.add(CSS.option)\n    block.classList.add(CSS.toggleColHeaderOption)\n\n    block.addEventListener(\"click\", () => {\n      this._setAlignment('center')\n    })\n\n    return block\n  }\n\n  _createAlignmentLeftButton() {\n    const block = document.createElement(\"button\")\n\n    block.textContent = this.api.i18n.t(\"Text left\")\n\n    block.classList.add(CSS.option)\n    block.classList.add(CSS.toggleColHeaderOption)\n\n    block.addEventListener(\"click\", () => {\n      this._setAlignment('left');\n    })\n\n    return block\n  }\n\n  _createAlignmentRightButton() {\n    const block = document.createElement(\"button\")\n\n    block.textContent = this.api.i18n.t(\"Text right\")\n\n    block.classList.add(CSS.option)\n    block.classList.add(CSS.toggleColHeaderOption)\n\n    block.addEventListener(\"click\", () => {\n      this._setAlignment('right');\n    })\n\n    return block\n  }\n\n  _setAlignment(align) {\n    const selectedRows = this.table.selectedRows\n    const selectedCols = this.table.selectedCols\n    const selectedCell = this.table.selectedCell\n\n    if (! selectedRows.length && ! selectedCols.length) {\n      selectedCell.style.textAlign = align\n      this.table.deselectCells()\n      return\n    }\n\n    for (let i = selectedRows[0]; i <= selectedRows[selectedRows.length - 1]; i++) {\n      for (let j = selectedCols[0]; j <= selectedCols[selectedCols.length - 1]; j++) {\n        this\n            .table\n            .body\n            .rows[i]\n            .cells[j]\n            .style\n            .textAlign = align\n      }\n    }\n  }\n\n  _createCellGroup(name, blocks) {\n    const groupBlock = document.createElement('div')\n    const nameBlock = document.createElement('span')\n\n    groupBlock.classList.add(CSS.group)\n    nameBlock.innerText = name\n\n    groupBlock.appendChild(nameBlock)\n\n    blocks.forEach((block) => {\n      groupBlock.appendChild(block)\n    })\n\n    return groupBlock\n  }\n\n  _fillCellMenu() {\n    const headerGroup = this._createCellGroup(this.api.i18n.t('Header'), [\n      this._createToggleFirstRowHeaderButton.call(this.table),\n      this._createToggleFirstColHeaderButton.call(this.table),\n    ]);\n\n    const manageGroup = this._createCellGroup(this.api.i18n.t('Manage'), [\n      this._createAddColumnOnRightButton.call(this.table),\n      this._createAddRowBelow.call(this.table),\n      this._createMergeButton.call(this.table),\n      this._createUnmergeButton.call(this.table),\n      this._createRowRemoveButton.call(this.table),\n      this._createColRemoveButton.call(this.table),\n    ])\n\n    const styleGroup= this._createCellGroup(this.api.i18n.t('Style'), [\n      this._createColorPickerButton(),\n    ])\n\n    const alignmentGroup= this._createCellGroup(this.api.i18n.t('Alignment'), [\n        this._createAlignmentCenterButton(),\n        this._createAlignmentLeftButton(),\n        this._createAlignmentRightButton(),\n    ])\n\n    this._cellMenuInner.appendChild(headerGroup)\n    this._cellMenuInner.appendChild(manageGroup)\n    this._cellMenuInner.appendChild(styleGroup)\n    this._cellMenuInner.appendChild(alignmentGroup)\n  }\n\n  /**\n   * 메뉴 창 닫기를 방지합니다.\n   *\n   * @param {MouseEvent} event\n   */\n  _handleMouseDown(event) {\n    event.preventDefault()\n  }\n\n  _handleCellMenuButtonClick(event) {\n    const openCellMenuButton = event.target.closest(\".\" + CSS.openCellMenuButton)\n    const iconBox = openCellMenuButton.querySelector(\".\" + CSS.iconBox)\n    const mergeOption = this.container.querySelector(\".\" + CSS.mergeOption)\n    const unmergeOption = this.container.querySelector(\".\" + CSS.unmergeOption)\n    const toggleRowHeaderOption = this.container.querySelector(\".\" + CSS.toggleRowHeaderOption)\n    const toggleColHeaderOption = this.container.querySelector(\".\" + CSS.toggleColHeaderOption)\n    const { top, right } = iconBox.getBoundingClientRect()\n    const scrollY = Math.floor(window.scrollY)\n    const isMergePossible = this.table.checkIfMergePossible.call(this.table)\n    const isCurrentCellMerged =\n      this.table.selectedCell.colSpan > 1 || this.table.selectedCell.rowSpan > 1\n    const isToggleRowHeaderPossible = this.table.selectedCell.parentNode.rowIndex === 0\n    const isToggleColHeaderPossible = this.table.selectedCell.cellIndex === 0\n\n    iconBox.classList.add(\"activated\")\n\n    const menuWidth = this.container.offsetWidth;\n    const windowWidth = window.innerWidth;\n\n    iconBox.classList.add(\"activated\");\n\n    this.container.style.top = `${Math.floor(top) + scrollY}px`;\n\n    if (right + menuWidth > windowWidth) {\n      this.container.style.left = `${iconBox.getBoundingClientRect().left - menuWidth - 4}px`;\n    } else {\n      this.container.style.left = `${right + 4}px`;\n    }\n\n    this.container.style.visibility = \"visible\";\n\n    if (isToggleRowHeaderPossible) {\n      toggleRowHeaderOption.style.display = \"flex\"\n\n      this.table.isRowHeaderOn\n        ? toggleRowHeaderOption.classList.add(CSS.rowHeaderOn)\n        : toggleRowHeaderOption.classList.remove(CSS.rowHeaderOn)\n    } else {\n      toggleRowHeaderOption.style.display = \"none\"\n    }\n\n    if (isToggleColHeaderPossible) {\n      toggleColHeaderOption.style.display = \"flex\"\n\n      this.table.isColHeaderOn\n        ? toggleColHeaderOption.classList.add(CSS.colHeaderOn)\n        : toggleColHeaderOption.classList.remove(CSS.colHeaderOn)\n    } else {\n      toggleColHeaderOption.style.display = \"none\"\n    }\n\n    if (isMergePossible) {\n      mergeOption.disabled = false\n    } else {\n      mergeOption.disabled = true\n    }\n\n    if (isCurrentCellMerged) {\n      unmergeOption.style.display = \"flex\"\n    } else {\n      unmergeOption.style.display = \"none\"\n    }\n  }\n\n  _init() {\n    const cellMenuInner = document.createElement(\"div\")\n    cellMenuInner.classList.add(CSS.cellMenuInner)\n\n    const cellMenu = document.createElement(\"div\")\n    cellMenu.appendChild(cellMenuInner)\n    cellMenu.classList.add(CSS.cellMenu)\n\n    const colorPalette = document.createElement(\"div\")\n    colorPalette.classList.add(CSS.colorPalette)\n\n    this._colors.forEach((color) => {\n      const colorBlock = document.createElement(\"figure\")\n      colorBlock.style.backgroundColor = color\n      colorBlock.classList.add(CSS.colorBlock)\n      colorBlock.setAttribute(\"data-color\", color)\n      colorPalette.appendChild(colorBlock)\n    })\n\n    this.container = cellMenu\n    this.colorPalette = colorPalette\n    this._cellMenuInner = cellMenuInner\n\n    this._cellMenuInner.addEventListener(\"click\", this._catchClickEventDelegation.bind(this))\n    this.colorPalette.addEventListener(\"click\", this._changeCellColor.bind(this))\n    this.colorPalette.addEventListener(\"mouseenter\", this._showColorPalette.bind(this))\n    this.colorPalette.addEventListener(\"mouseleave\", this._hideColorPalette.bind(this))\n\n    document.body.appendChild(cellMenu)\n    document.body.appendChild(colorPalette)\n    document.addEventListener(\"click\", this._hideCellMenu.bind(this))\n  }\n\n  _catchClickEventDelegation(event) {\n    if (event.target.classList.contains(CSS.option)) {\n      this._hideCellMenu(event)\n    }\n  }\n}\n\nexport const CSS = {\n  openCellMenuButton: \"tc-table__option_button\",\n  iconBox: \"tc-table__option_button__inner_box\",\n  cellMenu: \"tc-table__option_table\",\n  cellMenuInner: \"tc-table__option_table__inner\",\n  option: \"tc-table__option_table__inner__option\",\n  mergeOption: \"merge-option\",\n  unmergeOption: \"unmerge-option\",\n  colorOption: \"color-option\",\n  colorPalette: \"tc-table__color-palette\",\n  colorBlock: \"color-block\",\n  toggleRowHeaderOption: \"toggle-row-header-option\",\n  toggleColHeaderOption: \"toggle-col-header-option\",\n  rowHeaderOn: \"row-header-on\",\n  colHeaderOn: \"col-header-on\",\n  group: 'table_cell_group'\n}\n","import { getCaretCharacterOffsetWithin } from \"./documentUtils\"\nimport { CSS } from \"./table\"\n\nexport class Shortcuts {\n  constructor(table, api) {\n    this.table = table\n    this.api = api\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleEnterKeyPress(event) {\n    event.stopPropagation()\n\n    if (this._isComposingKorean(event)) return\n\n    document.execCommand(\"insertLineBreak\")\n    event.preventDefault()\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleTabKeyPress(event) {\n    event.stopPropagation()\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleShiftTabKeyPress(event) {\n    event.stopPropagation()\n    event.preventDefault()\n\n    if (this._isComposingKorean(event)) return\n\n    const table = this.table.body\n    const selectedCell = this.table.selectedCell\n    const isFirstCell = selectedCell.parentNode.rowIndex === 0 && selectedCell.cellIndex === 0\n    const isAtLeftEnd = selectedCell.cellIndex === 0\n    const leftCell = table.rows[selectedCell.parentNode.rowIndex].cells[selectedCell.cellIndex - 1]\n\n    if (isFirstCell) {\n      this.api.caret.setToPreviousBlock(\"end\", 0)\n      return\n    }\n\n    if (isAtLeftEnd) {\n      const upperRowLastCell =\n        table.rows[selectedCell.parentNode.rowIndex - 1].cells[table.rows[0].cells.length - 1]\n\n      upperRowLastCell.querySelector(\".\" + CSS.inputField).focus()\n      return\n    }\n\n    if (leftCell.style.display === \"none\") {\n      const mainMergedCell = this.table.searchMainMergedCell(leftCell)\n      const mainMergedCellInput = mainMergedCell.querySelector(\".\" + CSS.inputField)\n\n      mainMergedCellInput.focus()\n      return\n    }\n\n    leftCell.querySelector(\".\" + CSS.inputField).focus()\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleArrowUpKeyPress(event) {\n    event.stopPropagation()\n\n    const table = this.table.body\n    const selectedCell = this.table.selectedCell\n    const inputField = selectedCell.querySelector(\".\" + CSS.inputField)\n    const caretPosition = getCaretCharacterOffsetWithin(inputField)\n\n    if (selectedCell.parentNode.rowIndex === 0) {\n      this.api.caret.setToPreviousBlock(\"end\", 0)\n      return\n    }\n\n    if (caretPosition === 0) {\n      const upperCell =\n        table.rows[selectedCell.parentNode.rowIndex - 1].cells[selectedCell.cellIndex]\n      const upperCellInput = upperCell.querySelector(\".\" + CSS.inputField)\n\n      if (upperCell.style.display === \"none\") {\n        const mainMergedCell = this.table.searchMainMergedCell(upperCell)\n        const mainMergedCellInput = mainMergedCell.querySelector(\".\" + CSS.inputField)\n\n        mainMergedCellInput.focus()\n      }\n\n      if (!upperCell.style.getPropertyValue(\"display\")) {\n        upperCellInput.focus()\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleArrowDownKeyPress(event) {\n    event.stopPropagation()\n\n    if (this._isComposingKorean(event)) return\n\n    const table = this.table.body\n    const selectedCell = this.table.selectedCell\n    const inputField = selectedCell.querySelector(\".\" + CSS.inputField)\n    const caretPosition = getCaretCharacterOffsetWithin(inputField)\n    const isCurrentCellAtBottom =\n      selectedCell.parentNode.rowIndex + selectedCell.rowSpan - 1 === table.rows.length - 1\n\n    if (isCurrentCellAtBottom) {\n      this.api.caret.setToNextBlock(\"start\", 0)\n      return\n    }\n\n    if (caretPosition === inputField.textContent.length) {\n      const belowCell =\n        table.rows[selectedCell.parentNode.rowIndex + selectedCell.rowSpan].cells[\n          selectedCell.cellIndex\n        ]\n      const belowCellInput = belowCell.querySelector(\".\" + CSS.inputField)\n\n      if (belowCell.style.display === \"none\") {\n        const mainMergedCell = this.table.searchMainMergedCell(belowCell)\n        const mainMergedCellInput = mainMergedCell.querySelector(\".\" + CSS.inputField)\n\n        mainMergedCellInput.focus()\n      } else {\n        belowCellInput.focus()\n      }\n    }\n  }\n\n  /**\n   * 한글을 입력중일때 커서를 옮기면 다음 셀에 입력하고 있던 글자가 복사되는 버그를 해결합니다.\n   * https://velog.io/@corinthionia/JS-keydown에서-한글-입력-시-마지막-음절이-중복-입력되는-경우-함수가-두-번-실행되는-경우\n   *\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _isComposingKorean(event) {\n    return event.isComposing\n  }\n}\n","import {\n  create,\n  getCoords,\n  getSideByCoords,\n  turnTdIntoTh,\n  turnThIntoTd,\n  hideCell,\n  showHiddenCell, getIndex,\n} from \"./documentUtils\"\nimport { Resize } from \"./resize\"\nimport { SelectLine, CSS as CSSSelectLine } from \"./selectLine\"\nimport { CreateLine } from \"./createLine\"\nimport \"./styles/table.scss\"\nimport { CellMenu, CSS as CellMenuCSS } from \"./cellMenu\"\nimport { Shortcuts } from \"./shortcuts\"\n\nexport const CSS = {\n  table: \"tc-table\",\n  inputField: \"tc-table__inp\",\n  cell: \"tc-table__cell\",\n  container: \"tc-table__container\",\n  containerReadOnly: \"tc-table__container_readonly\",\n  wrapper: \"tc-table__wrap\",\n  area: \"tc-table__area\",\n  addColumn: \"tc-table__add_column\",\n  addRow: \"tc-table__add_row\",\n  selected: \"selected\",\n}\n\n/**\n * Generates and manages _table contents.\n */\nexport class Table {\n  /**\n   * Creates\n   *\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor(config, api, readOnly) {\n    this.api = api\n    this.readOnly = readOnly\n    this._numberOfColumns = 0\n    this._numberOfRows = 0\n\n    this._element = this._createTableWrapper()\n    this._table = this._element.querySelector(\"table\")\n    this.colgroup = this._table.querySelector(\"colgroup\")\n    this.selectedRows = []\n    this.selectedCols = []\n    this.visibleCells = []\n    this.isRowHeaderOn = false\n    this.isColHeaderOn = false\n\n    this.resize = new Resize(this)\n    this.selectLine = new SelectLine(this)\n    this.createLine = new CreateLine(this)\n    this.cellMenu = new CellMenu(this, config, api)\n    this.shortcuts = new Shortcuts(this, api)\n\n    if (!this.readOnly) {\n      this._hangEvents()\n    }\n  }\n\n  deselectCells() {\n    const everyCell = this._table.querySelectorAll(\".\" + CSS.selected)\n\n    everyCell.forEach((cell) => {\n      cell.classList.remove(CSS.selected)\n    })\n\n    this.selectLine.dehighlightSelectLines()\n    this.selectLine.hideLineRemoveButton()\n\n    this.selectedRows = []\n    this.selectedCols = []\n  }\n\n  fillButtons = (cell, x, y) => {\n    if (this.readOnly) return\n\n    // column\n    if (y === 0) {\n      // this.createLine.createElem(cell)\n    }\n\n    if (x !== 0) {\n      // 여기서 너비조절 막대기 생성하는 중.\n      this.resize.createElem(cell)\n    }\n\n    // select line button\n    if (x === 0 || y === 0) {\n      this.selectLine.createElem(cell, Number(x === 0))\n      if (x === 0 && y === 0) {\n        this.selectLine.createElem(cell)\n      }\n    }\n\n    // row\n    if (x === 0) {\n      // this.createLine.createElem(cell, 1)\n    }\n  }\n\n  updateButtons = () => {\n    for (let i = 0; i < this._table.rows.length; i += 1) {\n      const row = this._table.rows[i]\n\n      for (let r = 0; r < row.children.length; r += 1) {\n        const cell = row.children[r]\n        this.fillButtons(cell, r, i)\n      }\n    }\n  }\n\n  removeButtons = (direction = 0) => {\n    const arr = [\n      [CSS.addColumn, CSSSelectLine.selectLineCol],\n      [CSS.addRow, CSSSelectLine.selectLineRow],\n    ]\n    arr[direction].forEach((className) => {\n      const elem1 = this._table.querySelectorAll(`.${className}`)\n      for (let i = 0; i < elem1.length; i += 1) {\n        elem1[i].remove()\n      }\n    })\n  }\n\n  insertCol(index) {\n    const col = create(\"col\", [], { span: 1 })\n\n    this.colgroup.insertBefore(col, this.colgroup.children[index])\n  }\n\n  removeCol(index) {\n    this.body.querySelector(\"colgroup\").children[index].remove()\n  }\n\n  drawTableFromData(data) {\n    const table = this._table\n    const { rows, colgroup } = data\n\n    rows.forEach((row, i) => {\n      const newRow = table.insertRow(i)\n      const isFirstRow = i === 0\n      const isSecondRow = i === 1\n\n      if (isFirstRow) {\n        this.removeButtons(0)\n      }\n\n      if (isFirstRow && row[1] && row[1].isHeader) {\n        this.isRowHeaderOn = true\n      }\n      if (isSecondRow && row[0] && row[0].isHeader) {\n        this.isColHeaderOn = true\n      }\n\n      row.forEach(({ content, bgColor, alignment, colspan, rowspan, display, isHeader }, i) => {\n        const newCell = newRow.insertCell(i)\n\n        this._fillCell(newCell)\n\n        newCell.colSpan = colspan\n        newCell.rowSpan = rowspan\n        newCell.style.backgroundColor = bgColor\n        newCell.style.textAlign = alignment\n        newCell.querySelector(\".\" + CSS.inputField).innerHTML = content\n\n        if (display === false) {\n          newCell.style.display = \"none\"\n          newCell.setAttribute(\"data-visibility\", \"hidden\")\n          newCell.querySelector(\".\" + CSS.inputField).contentEditable = false\n        }\n\n        if (isHeader) {\n          turnTdIntoTh(newCell)\n        }\n      })\n\n      this._numberOfRows++\n      this.updateButtons()\n    })\n\n    colgroup.forEach(({ span, width }, i) => {\n      if (i === 0) {\n        this.removeButtons(1)\n      }\n\n      this._numberOfColumns++\n      this.insertCol(i)\n      this.updateButtons()\n\n      this.colgroup.children[i].width = width\n      this.colgroup.children[i].span = span\n    })\n  }\n\n  selectColumn(index) {\n    const table = this._table\n\n    for (let i = 0; i < table.rows.length; i++) {\n      let celSpanCount = 0;\n\n      for (let o = 0; o < table.rows[i].cells.length; o++) {\n        if (table.rows[i].cells[o].colSpan > 1) {\n          celSpanCount += table.rows[i].cells[o].colSpan;\n        }\n      }\n\n      if (celSpanCount > 1) {\n        celSpanCount -= 1;\n      }\n\n      const cell = table.rows[i].cells[index - celSpanCount]\n\n      if (cell) {\n        cell.classList.add(CSS.selected)\n      }\n    }\n  }\n\n  selectRow(index) {\n    const table = this._table\n\n    for (let i = 0; i < table.rows[index].cells.length; i++) {\n      const cell = table.rows[index].cells[i]\n      cell.classList.add(CSS.selected)\n    }\n  }\n\n  /**\n   * Add column in table on index place\n   *\n   * @param {number} index - number in the array of columns, where new column to insert,-1 if insert at the end\n   */\n  addColumn(index = -1) {\n    this._numberOfColumns++\n    /** Add cell in each row */\n    const rows = this._table.rows\n\n    if (index === 0) {\n      this.removeButtons(1)\n    }\n\n    this.insertCol(index)\n\n    for (let i = 0; i < rows.length; i++) {\n      if (index > rows[i].cells.length) {\n        rows[0].cells[rows[0].cells.length - 1].colSpan = index + 1\n      } else {\n        const cell = rows[i].insertCell(index)\n        cell.colSpan = 1\n        cell.rowSpan = 1\n        this._fillCell(cell)\n      }\n    }\n\n    if (!this.readOnly) {\n      this.updateButtons()\n    }\n  }\n\n  addColumnOnRight() {\n    const table = this._table\n    const isSelectedCellMerged = this.selectedCell.colSpan > 1 || this.selectedCell.rowSpan > 1\n    const edgeIndex = this.selectedCell.colSpan + this.selectedCell.cellIndex - 1\n    const index = isSelectedCellMerged ? edgeIndex : this.selectedCell.cellIndex\n    const isLastColumn = index === table.rows[0].cells.length - 1\n\n    const fillCell = (cell, isFirstRow) => {\n      if (isFirstRow && this.isRowHeaderOn) {\n        this._fillCell(cell)\n        turnTdIntoTh(cell)\n        return\n      }\n\n      this._fillCell(cell)\n    }\n\n    if (isLastColumn) {\n      this.addColumn()\n      return\n    }\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const cellInColumn = row.cells[index]\n      const isFirstRow = i === 0\n      const isInvisibleCell = cellInColumn.style.display === \"none\"\n      const isMainMergedCell = cellInColumn.colSpan > 1 || cellInColumn.rowSpan > 1\n      const isNormalCell =\n        cellInColumn.colSpan === 1 &&\n        cellInColumn.rowSpan === 1 &&\n        cellInColumn.style.display !== \"none\"\n\n      if (isNormalCell) {\n        const newCell = row.insertCell(index + 1)\n\n        newCell.colSpan = 1\n        newCell.rowSpan = 1\n\n        fillCell(newCell, isFirstRow)\n        continue\n      }\n\n      if (isMainMergedCell) {\n        const newCell = row.insertCell(index + 1)\n\n        cellInColumn.colSpan += 1\n\n        fillCell(newCell, isFirstRow)\n        hideCell(newCell)\n        continue\n      }\n\n      if (isInvisibleCell) {\n        const mainMergedCell = this.searchMainMergedCell(cellInColumn)\n        const isOnSameRowWithMainCell = i === mainMergedCell.parentNode.rowIndex\n        const isOnRightEdgeOfMainCell =\n          index === mainMergedCell.cellIndex + mainMergedCell.colSpan - 1\n\n        if (isOnRightEdgeOfMainCell) {\n          const newCell = row.insertCell(index + 1)\n\n          newCell.colSpan = 1\n          newCell.rowSpan = 1\n\n          fillCell(newCell, isFirstRow)\n          continue\n        }\n\n        if (isOnSameRowWithMainCell) {\n          const newCell = row.insertCell(index + 1)\n\n          mainMergedCell.colSpan += 1\n\n          fillCell(newCell, isFirstRow)\n          hideCell(newCell)\n          continue\n        }\n\n        const newCell = row.insertCell(index + 1)\n\n        fillCell(newCell, isFirstRow)\n        hideCell(newCell)\n        continue\n      }\n    }\n\n    this._numberOfColumns++\n    this.insertCol(index + 1)\n    this.updateButtons()\n  }\n\n  /**\n   *\n   * @param {HTMLTableCellElement} cell\n   */\n  searchMainMergedCell(cell) {\n    const table = this._table\n    const rowIndex = cell.parentNode.rowIndex\n    const colIndex = cell.cellIndex\n    const cells = table.querySelectorAll(\"td,th\")\n    const mainMergedCells = Array.from(cells).filter((cell) => cell.colSpan > 1 || cell.rowSpan > 1)\n\n    return mainMergedCells.find((mainCell) => {\n      const mainCellRowIndex = mainCell.parentNode.rowIndex\n      const mainCellColindex = mainCell.cellIndex\n      const mainCellMaxRowIndex = mainCellRowIndex + (mainCell.rowSpan - 1)\n      const mainCellMaxColIndex = mainCellColindex + (mainCell.colSpan - 1)\n\n      return (\n        mainCellRowIndex <= rowIndex &&\n        rowIndex <= mainCellMaxRowIndex &&\n        mainCellColindex <= colIndex &&\n        colIndex <= mainCellMaxColIndex\n      )\n    })\n  }\n\n  removeColumn(index) {\n    const table = this._table\n    const isFirstColumn = index === 0\n\n    if (isFirstColumn) {\n      this.isColHeaderOn = false\n    }\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      let cellInColumn = row.cells[index]\n      const colIndex = getIndex(row.cells, index);\n\n      if (! cellInColumn || cellInColumn.style.display === 'none') {\n        cellInColumn = row.cells[colIndex]\n      }\n\n      if (cellInColumn.colSpan > 1) {\n        cellInColumn.colSpan = cellInColumn.colSpan - 1\n\n        continue\n      }\n\n      // 현재 셀이 합쳐진 셀의 본체라면, 셀의 colspan, rowspan 만큼의 범위를 순회하며 거치는 모든 셀을 해방합니다.\n      // 그리고 인덱스에 해당하는 셀을 삭제합니다.\n      if (cellInColumn.colSpan > 1) {\n        const colspan = cellInColumn.colSpan\n        const rowspan = cellInColumn.rowSpan\n\n        for (let j = i; j < i + rowspan; j++) {\n          for (let k = index; k < index + colspan; k++) {\n            const cell = table.rows[j].cells[k]\n\n            showHiddenCell(cell)\n          }\n\n          table.rows[j].deleteCell(index)\n        }\n\n        i += rowspan - 1\n        continue\n      }\n\n      // 현재 셀이 합쳐진 셀의 일부라면 왼쪽으로 탐색하며 합쳐진 셀의 본체를 찾습니다.\n      // 본체를 찾았다면 본체의 colSpan 을 1 깎고 반복문을 종료합니다.\n      if (cellInColumn.style.display === \"none\") {\n        for (let j = index - 1; j >= 0; j--) {\n          const leftCell = row.cells[j]\n\n          if (leftCell.colSpan > 1) {\n            leftCell.colSpan -= 1\n            break\n          }\n\n          if (leftCell.style.display !== \"none\") {\n            break\n          }\n        }\n      }\n\n      Array\n          .from(this._table.rows[i].cells)\n          .filter((cell) => cell.style.display !== 'none')\n          [colIndex]\n          .remove()\n    }\n\n    this._numberOfColumns--\n    this._removeInvisibleRows()\n\n    if (!this.readOnly) {\n      this.removeCol(index)\n      this.updateButtons()\n    }\n  }\n\n  /**\n   * Add row in table on index place\n   *\n   * @param {number} index - number in the array of columns, where new column to insert,-1 if insert at the end\n   * @returns {HTMLElement} row\n   */\n  addRow(index = -1) {\n    this._numberOfRows++\n    const row = this._table.insertRow(index)\n\n    if (index === 0) {\n      this.removeButtons(0)\n    }\n\n    this._fillRow(row, index)\n    this.updateButtons()\n    return row\n  }\n\n  addRowBelow() {\n    const table = this._table\n    const isSelectedCellMerged = this.selectedCell.colSpan > 1 || this.selectedCell.rowSpan > 1\n    const edgeIndex = this.selectedCell.rowSpan + this.selectedCell.parentNode.rowIndex - 1\n    const index = isSelectedCellMerged ? edgeIndex : this.selectedCell.parentNode.rowIndex\n    const isLastRow = index === table.rows.length - 1\n\n    const fillCell = (cell, isFirstColumn) => {\n      if (isFirstColumn && this.isColHeaderOn) {\n        this._fillCell(cell)\n        turnTdIntoTh(cell)\n        return\n      }\n\n      this._fillCell(cell)\n    }\n\n    if (isLastRow) {\n      this.addRow()\n      return\n    }\n\n    const newRow = table.insertRow(index + 1)\n\n    for (let i = 0; i < table.rows[index].cells.length; i++) {\n      const cell = table.rows[index].cells[i]\n      const isInvisibleCell = cell.style.display === \"none\"\n      const isMainMergedCell = cell.colSpan > 1 || cell.rowSpan > 1\n      const isNormalCell = cell.colSpan === 1 && cell.rowSpan === 1 && cell.style.display !== \"none\"\n      const isFirstColumn = i === 0\n\n      if (isNormalCell) {\n        const newCell = newRow.insertCell(i)\n\n        newCell.colSpan = 1\n        newCell.rowSpan = 1\n\n        fillCell(newCell, isFirstColumn)\n        continue\n      }\n\n      if (isMainMergedCell) {\n        const newCell = newRow.insertCell(i)\n\n        cell.rowSpan += 1\n\n        fillCell(newCell, isFirstColumn)\n        hideCell(newCell)\n        continue\n      }\n\n      if (isInvisibleCell) {\n        const mainMergedCell = this.searchMainMergedCell(cell)\n        const isOnSameColumnWithMainCell = i === mainMergedCell.cellIndex\n        const isAtBottomOfMaincell =\n          index === mainMergedCell.parentNode.rowIndex + mainMergedCell.rowSpan - 1\n\n        if (isAtBottomOfMaincell) {\n          const newCell = newRow.insertCell(i)\n\n          newCell.colSpan = 1\n          newCell.rowSpan = 1\n\n          fillCell(newCell, isFirstColumn)\n          continue\n        }\n\n        if (isOnSameColumnWithMainCell) {\n          const newCell = newRow.insertCell(i)\n\n          mainMergedCell.rowSpan += 1\n\n          fillCell(newCell, isFirstColumn)\n          hideCell(newCell)\n          continue\n        }\n\n        const newCell = newRow.insertCell(i)\n\n        fillCell(newCell, isFirstColumn)\n        hideCell(newCell)\n        continue\n      }\n    }\n\n    this._numberOfRows++\n    this.updateButtons()\n  }\n\n  removeRow(index) {\n    const table = this._table\n    const selectedRow = table.rows[index]\n    const isFirstRow = index === 0\n\n    if (isFirstRow) {\n      this.isRowHeaderOn = false\n    }\n\n    for (let i = 0; i < selectedRow.cells.length; i++) {\n      const cell = selectedRow.cells[i]\n\n      // 현재 셀이 합쳐진 셀의 본체라면, 아래로 탐색하며 소속된 셀을 전부 해방합니다.\n      // 같은 줄에 소속된 셀이 있다면 삭제될 것이니 건너뜁니다.\n      if (cell.rowSpan > 1) {\n        for (let j = index + 1; j < table.rows.length; j++) {\n          for (let k = i; k < i + cell.colSpan; k++) {\n            const cellBelow = table.rows[j].cells[k]\n\n            showHiddenCell(cellBelow)\n          }\n        }\n      }\n\n      if (cell.colSpan > 1) {\n        i += cell.colSpan\n      }\n\n      // 현재 셀이 합쳐진 셀의 일부라면 위로 탐색하며 합쳐진 셀의 본체를 찾습니다.\n      // 본체를 찾았다면 본체의 rowSpan 을 1 깎고 반복문을 종료합니다.\n      if (cell.style.display === \"none\") {\n        for (let j = index - 1; j >= 0; j--) {\n          const upperRow = table.rows[j]\n          const cellInUpperRow = upperRow.cells[i]\n\n          if (cellInUpperRow.rowSpan > 1) {\n            cellInUpperRow.rowSpan -= 1\n            break\n          }\n\n          if (cellInUpperRow.style.display !== \"none\") {\n            break\n          }\n        }\n      }\n    }\n\n    this._numberOfRows--\n    table.rows[index].remove()\n    this.updateButtons()\n  }\n\n  mergeCells() {\n    const table = this._table\n    const everyCell = table.querySelectorAll(\"td,th\")\n    const selectedCells = Array.from(everyCell).filter((cell) =>\n      cell.classList.contains(CSS.selected)\n    )\n\n    const topLeftCell = selectedCells[0]\n    const bottomRightCell = selectedCells[selectedCells.length - 1]\n\n    const colSpan = bottomRightCell.cellIndex - topLeftCell.cellIndex + 1\n    const rowSpan = bottomRightCell.parentNode.rowIndex - topLeftCell.parentNode.rowIndex + 1\n\n    selectedCells.forEach((cell, i) => {\n      // 첫 번째 셀의 colspan, rowspan 을 늘리고 나머지 셀을 숨긴다.\n      if (i === 0) {\n        cell.colSpan = colSpan\n        cell.rowSpan = rowSpan\n      } else {\n        hideCell(cell)\n      }\n    })\n\n    this._removeInvisibleRows()\n    // remove invisible columns?\n  }\n\n  checkIfMergePossible() {\n    if (!this.selectedCols.length && !this.selectedRows.length) {\n      return false\n    }\n\n    const table = this._table\n\n    let everySelectedCells = 0\n    let visibleSelectedCells = 0\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n\n      for (let j = 0; j < row.cells.length; j++) {\n        const cell = row.cells[j]\n\n        if (cell.classList.contains(CSS.selected)) {\n          everySelectedCells += 1\n\n          if (cell.style.display !== \"none\") {\n            visibleSelectedCells += cell.colSpan * cell.rowSpan\n          }\n        }\n      }\n    }\n\n    return everySelectedCells === visibleSelectedCells\n  }\n\n  unmerge() {\n    const table = this._table\n    const selectedCell = this.selectedCell\n    const rowIndex = selectedCell.parentNode.rowIndex\n    const cellIndex = selectedCell.cellIndex\n    const rowSpan = selectedCell.rowSpan\n    const colSpan = selectedCell.colSpan\n\n    for (let i = rowIndex; i < rowIndex + rowSpan; i++) {\n      for (let j = cellIndex; j < cellIndex + colSpan; j++) {\n        const cell = table.rows[i].cells[j]\n\n        if (i === rowIndex && j === cellIndex) {\n          cell.colSpan = 1\n          cell.rowSpan = 1\n          continue\n        }\n\n        showHiddenCell(cell)\n      }\n    }\n  }\n\n  toggleFirstRowHeader() {\n    const table = this._table\n    const firstRow = table.rows[0]\n\n    for (let i = 0; i < firstRow.cells.length; i++) {\n      if (this.isRowHeaderOn) {\n        turnThIntoTd(firstRow.cells[i])\n      } else {\n        turnTdIntoTh(firstRow.cells[i])\n      }\n    }\n\n    if (this.isRowHeaderOn) {\n      this.isRowHeaderOn = false\n    } else {\n      this.isRowHeaderOn = true\n    }\n  }\n\n  toggleFirstColHeader() {\n    const table = this._table\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const cell = table.rows[i].cells[0]\n\n      if (this.isColHeaderOn) {\n        turnThIntoTd(cell)\n      } else {\n        turnTdIntoTh(cell)\n      }\n    }\n\n    if (this.isColHeaderOn) {\n      this.isColHeaderOn = false\n    } else {\n      this.isColHeaderOn = true\n    }\n  }\n\n  /**\n   * get html element of table\n   *\n   * @returns {HTMLElement}\n   */\n  get htmlElement() {\n    return this._element\n  }\n\n  /**\n   * get real table tag\n   *\n   * @returns {HTMLElement}\n   */\n  get body() {\n    return this._table\n  }\n\n  /**\n   * returns selected/editable cell\n   *\n   * @returns {HTMLElement}\n   */\n  get selectedCell() {\n    return this._selectedCell\n  }\n\n  get withBorder() {\n    return\n  }\n\n  /**\n   * 가로줄에 있는 모든 셀이 display=\"none\" 이 되는 경우에 해당 Row 를 삭제한다.\n   *\n   * @returns 위 조건에 해당하는 Row 의 갯수를 반환한다.\n   */\n  _removeInvisibleRows() {\n    const table = this._table\n    const invisibleRows = []\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const isEveryCellInvisible = Array.from(row.cells).every(\n        (cell) => cell.style.display === \"none\"\n      )\n\n      if (isEveryCellInvisible) {\n        invisibleRows.push(i)\n      }\n    }\n\n    invisibleRows.forEach((index, i) => {\n      this.removeRow(index - i)\n    })\n\n    // 테이블의 row 가 하나로 줄어든다면 모든 셀의 rowSpan 을 1 로 보정합니다.\n    if (table.rows.length === 1) {\n      for (let i = 0; i < table.rows[0].cells.length; i++) {\n        const cell = table.rows[0].cells[i]\n\n        cell.rowSpan = 1\n      }\n    }\n\n    return invisibleRows.length\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} tbody - where rows will be\n   */\n  _createTableWrapper() {\n    const className = this.readOnly ? CSS.containerReadOnly : CSS.container\n    const wrapper = create(\"div\", [className], null, [\n      create(\"div\", [CSS.wrapper], null, [\n        create(\"table\", [CSS.table], null, [create(\"colgroup\"), create(\"tbody\")]),\n      ]),\n    ])\n\n    return wrapper\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} - the area\n   */\n  _createContentEditableArea() {\n    return create(\"div\", [CSS.inputField], { contentEditable: !this.readOnly })\n  }\n\n  /**\n   * @private\n   * @param {HTMLElement} cell - empty cell\n   */\n  _fillCell(cell) {\n    const content = this._createContentEditableArea()\n\n    this.cellMenu.createElem(cell)\n    cell.classList.add(CSS.cell)\n    cell.appendChild(create(\"div\", [CSS.area], null, [content]))\n  }\n\n  /**\n   * @private\n   * @param row = the empty row\n   */\n  _fillRow(row) {\n    for (let i = 0; i < this._numberOfColumns; i++) {\n      const cell = row.insertCell()\n\n      this._fillCell(cell)\n    }\n  }\n\n  /**\n   * @private\n   */\n  _hangEvents() {\n    this._table.addEventListener(\"focus\", this._focusEditField.bind(this), true)\n\n    this._table.addEventListener(\"blur\", this._blurEditField.bind(this), true)\n\n    this._table.addEventListener(\"keydown\", this._shortcutKeys.bind(this))\n\n    this._table.addEventListener(\"mousedown\", this._mouseDownOnCell.bind(this))\n\n    this._table.addEventListener(\"mouseover\", this._mouseEnterInDetectArea.bind(this), true)\n  }\n\n  /**\n   * @private\n   * @param {FocusEvent} event\n   */\n  _focusEditField(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n\n    this._selectedCell = event.target.closest(\".\" + CSS.cell)\n\n    const optionButton = this.selectedCell.querySelector(\".\" + CellMenuCSS.openCellMenuButton)\n\n    optionButton.style.visibility = \"visible\"\n  }\n\n  /**\n   * @private\n   * @param {FocusEvent} event\n   */\n  _blurEditField(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n\n    const lastSelectedCell = event.target.closest(\".\" + CSS.cell)\n    const optionButton = lastSelectedCell.querySelector(\".\" + CellMenuCSS.openCellMenuButton)\n\n    optionButton.style.visibility = \"hidden\"\n  }\n\n  /**\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _shortcutKeys(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n    if (event.key === \"Enter\") {\n      this.shortcuts.handleEnterKeyPress(event)\n      return\n    }\n    if (event.key === \"Tab\" && event.shiftKey) {\n      this.shortcuts.handleShiftTabKeyPress(event)\n      return\n    }\n    if (event.key === \"Tab\") {\n      this.shortcuts.handleTabKeyPress(event)\n      return\n    }\n    if (event.key === \"ArrowUp\") {\n      this.shortcuts.handleArrowUpKeyPress(event)\n      return\n    }\n    if (event.key === \"ArrowDown\") {\n      this.shortcuts.handleArrowDownKeyPress(event)\n      return\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  _mouseDownOnCell(event) {\n    if (event.button !== 0) return\n    if (event.target.closest(\".\" + CellMenuCSS.openCellMenuButton)) return\n    if (event.target.classList.contains(CSSSelectLine.selectLineCol)) return\n    if (event.target.classList.contains(CSSSelectLine.selectLineRow)) return\n    if (!event.target.closest(\"td,th\")) return\n\n    const table = this._table\n    const cell = event.target.closest(\"td,th\")\n    const startRowIndex = cell.parentNode.rowIndex\n    const startColIndex = cell.cellIndex\n    let currentCell = cell\n\n    const handleMouseMove = (event) => {\n      if (!event.target.closest(\"td,th\")) return\n\n      const elementBelowMousePointer = document.elementFromPoint(event.clientX, event.clientY)\n      const cellBelowMousePointer = elementBelowMousePointer.closest(\"td,th\")\n      const currentRowIndex = cellBelowMousePointer.parentNode.rowIndex\n      const currentColIndex = cellBelowMousePointer.cellIndex\n\n      if (currentCell !== cellBelowMousePointer) {\n        this.deselectCells()\n        selectCells(currentRowIndex, currentColIndex)\n        cellBelowMousePointer.querySelector(\".\" + CSS.inputField).focus()\n\n        currentCell = cellBelowMousePointer\n      }\n    }\n\n    const handleMouseUp = (event) => {\n      document.removeEventListener(\"mousemove\", handleMouseMove)\n      document.removeEventListener(\"mouseup\", handleMouseUp)\n    }\n\n    const selectCells = (currentRowIndex, currentColIndex) => {\n      const currentCell = table.rows[currentRowIndex].cells[currentColIndex]\n      const isLastCellMerged = currentCell.colSpan > 1 || currentCell.rowSpan > 1\n      let additionalRow = 0\n      let additionalCol = 0\n      this.selectedRows = []\n      this.selectedCols = []\n\n      if (isLastCellMerged) {\n        additionalRow += currentCell.rowSpan - 1\n        additionalCol += currentCell.colSpan - 1\n      }\n\n      for (let i = startRowIndex; i <= currentRowIndex + additionalRow; i++) {\n        const cellsInRow = table.rows[i].cells\n\n        for (let j = startColIndex; j <= currentColIndex + additionalCol; j++) {\n          const cell = cellsInRow[j]\n\n          cell.classList.add(CSS.selected)\n        }\n\n        this.selectedRows.push(i)\n      }\n\n      for (let i = startColIndex; i <= currentColIndex + additionalCol; i++) {\n        this.selectedCols.push(i)\n      }\n\n      const isEveryRowSelected = this.selectedRows.length === this._table.rows.length\n      const isEveryColSelected = this.selectedCols.length === this._table.rows[0].cells.length\n\n      if (isEveryRowSelected) {\n        this.selectLine.highlightColSelectLines(this.selectedCols)\n      }\n\n      if (isEveryColSelected) {\n        this.selectLine.highlightRowSelectLines(this.selectedRows)\n      }\n\n      if (!isEveryRowSelected && !isEveryColSelected) {\n        this.selectLine.hideLineRemoveButton()\n      }\n    }\n\n    this.deselectCells()\n\n    document.addEventListener(\"mousemove\", handleMouseMove)\n    document.addEventListener(\"mouseup\", handleMouseUp)\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  _mouseEnterInDetectArea(event) {\n    if (!event.target.classList.contains(CSS.area)) {\n      return\n    }\n\n    const coordsCell = getCoords(event.target.closest(\"TD,TH\"))\n    const side = getSideByCoords(coordsCell, event.pageX, event.pageY)\n\n    event.stopPropagation()\n    event.target.dispatchEvent(\n      new CustomEvent(\"mouseInActivatingArea\", {\n        detail: {\n          side: side,\n        },\n        bubbles: true,\n      })\n    )\n  }\n}\n","import { CSS as TableCSS } from \"./table\"\n\n/**\n * Checks the item is not missed or messed\n * @param {object|string[]|Element[]|HTMLElement|string} elem - element\n * @returns {boolean} true if element is correct\n * @private\n */\nfunction _isNotMissed(elem) {\n  return !(elem === undefined || elem === null)\n}\n\n/**\n * Create DOM element with set parameters\n * @param {string} tagName - Html tag of the element to be created\n * @param {string[]} cssClasses - Css classes that must be applied to an element\n * @param {object} attrs - Attributes that must be applied to the element\n * @param {Element[]} children - child elements of creating element\n * @returns {HTMLElement} the new element\n */\nexport function create(tagName, cssClasses = null, attrs = null, children = null) {\n  const elem = document.createElement(tagName)\n\n  if (_isNotMissed(cssClasses)) {\n    for (let i = 0; i < cssClasses.length; i++) {\n      if (_isNotMissed(cssClasses[i])) {\n        elem.classList.add(cssClasses[i])\n      }\n    }\n  }\n  if (_isNotMissed(attrs)) {\n    for (let key in attrs) {\n      elem.setAttribute(key, attrs[key])\n    }\n  }\n  if (_isNotMissed(children)) {\n    for (let i = 0; i < children.length; i++) {\n      if (_isNotMissed(children[i])) {\n        elem.appendChild(children[i])\n      }\n    }\n  }\n  return elem\n}\n\n/**\n * Get item position relative to document\n * @param {HTMLElement} elem - item\n * @returns {{x1: number, y1: number, x2: number, y2: number}} coordinates of the upper left (x1,y1) and lower right(x2,y2) corners\n */\nexport function getCoords(elem) {\n  const rect = elem.getBoundingClientRect()\n\n  return {\n    y1: Math.floor(rect.top + window.pageYOffset),\n    x1: Math.floor(rect.left + window.pageXOffset),\n    x2: Math.floor(rect.right + window.pageXOffset),\n    y2: Math.floor(rect.bottom + window.pageYOffset),\n  }\n}\n\n/**\n * Recognizes which side of the container  is closer to (x,y)\n * @param {{x1: number, y1: number, x2: number, y2: number}} coords - coords of container\n * @param x - x coord\n * @param y - y coord\n * @return {string}\n */\nexport function getSideByCoords(coords, x, y) {\n  let side\n  const sizeArea = 10\n\n  // a point is close to the boundary if the distance between them is less than the allowed distance.\n  // +1px on each side due to fractional pixels\n  if (x - coords.x1 >= -1 && x - coords.x1 <= sizeArea + 1) {\n    side = \"left\"\n  }\n  if (coords.x2 - x >= -1 && coords.x2 - x <= sizeArea + 1) {\n    side = \"right\"\n  }\n  if (y - coords.y1 >= -1 && y - coords.y1 <= sizeArea + 1) {\n    side = \"top\"\n  }\n  if (coords.y2 - y >= -1 && coords.y2 - y <= sizeArea + 1) {\n    side = \"bottom\"\n  }\n\n  return side\n}\n\n/**\n * td 엘리먼트를 th 엘리먼트로 변경한다\n * @param cell - TD Element\n */\nexport function turnTdIntoTh(cell) {\n  const th = document.createElement(\"th\")\n\n  th.setAttribute(\"rowspan\", cell.rowSpan)\n  th.setAttribute(\"colspan\", cell.colSpan)\n  th.setAttribute(\"class\", cell.className)\n  th.style.display = cell.style.display === \"none\" ? \"none\" : null\n\n  while (cell.firstChild) {\n    th.appendChild(cell.firstChild)\n  }\n\n  cell.parentNode.replaceChild(th, cell)\n}\n\n/**\n * th 엘리먼트를 td 엘리먼트로 변경한다\n * @param cell - TH Element\n */\nexport function turnThIntoTd(cell) {\n  const td = document.createElement(\"td\")\n\n  td.setAttribute(\"rowspan\", cell.rowSpan)\n  td.setAttribute(\"colspan\", cell.colSpan)\n  td.setAttribute(\"class\", cell.className)\n  td.style.setProperty(\"display\", cell.style.display === \"none\" ? \"none\" : null)\n\n  while (cell.firstChild) {\n    td.appendChild(cell.firstChild)\n  }\n\n  cell.parentNode.replaceChild(td, cell)\n}\n\nexport function hideCell(cell) {\n  cell.colSpan = 1\n  cell.rowSpan = 1\n  cell.style.display = \"none\"\n  cell.setAttribute(\"data-visibility\", \"hidden\")\n  cell.querySelector(\".\" + TableCSS.inputField).contentEditable = false\n}\n\nexport function showHiddenCell(cell) {\n  cell.colSpan = 1\n  cell.rowSpan = 1\n  cell.style.removeProperty(\"display\")\n  cell.removeAttribute(\"data-visibility\")\n  cell.querySelector(\".\" + TableCSS.inputField).contentEditable = true\n}\n\n/**\n * 커서의 인덱스를 반환합니다.\n * https://stackoverflow.com/questions/4811822/get-a-ranges-start-and-end-offsets-relative-to-its-parent-container/4812022#4812022\n *\n * @param {HTMLElement} element\n * @returns Number\n */\nexport function getCaretCharacterOffsetWithin(element) {\n  var caretOffset = 0\n  var doc = element.ownerDocument || element.document\n  var win = doc.defaultView || doc.parentWindow\n  var sel\n  if (typeof win.getSelection != \"undefined\") {\n    sel = win.getSelection()\n    if (sel.rangeCount > 0) {\n      var range = win.getSelection().getRangeAt(0)\n      var preCaretRange = range.cloneRange()\n      preCaretRange.selectNodeContents(element)\n      preCaretRange.setEnd(range.endContainer, range.endOffset)\n      caretOffset = preCaretRange.toString().length\n    }\n  } else if ((sel = doc.selection) && sel.type != \"Control\") {\n    var textRange = sel.createRange()\n    var preCaretTextRange = doc.body.createTextRange()\n    preCaretTextRange.moveToElementText(element)\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange)\n    caretOffset = preCaretTextRange.text.length\n  }\n  return caretOffset\n}\n\nexport const getIndex = (cells, index) => {\n  let colSpanCount = 0;\n\n  if (cells instanceof HTMLCollection) {\n    cells = Array.from(cells);\n  }\n\n  cells = cells.filter((cell) => cell.style.display !== 'none')\n\n  cells.forEach((cell) => {\n    if (cell.colSpan > 1) {\n      colSpanCount += cell.colSpan;\n    }\n  });\n\n  if (colSpanCount > 1) {\n    colSpanCount -= 1;\n  }\n\n  if (index < colSpanCount) {\n    return 0;\n  }\n\n  return index - colSpanCount;\n};","import { create } from \"./documentUtils\"\n\nexport const CSS = {\n  addColumnButton: \"tc-table__add_column_button\",\n  addRowButton: \"tc-table__add_row_button\",\n}\n\nexport class AddLine {\n  constructor(table) {\n    /**\n     * @private\n     */\n    this._table = table\n  }\n\n  createAddRowButton() {\n    const addRowButton = create(\"div\", [CSS.addRowButton])\n\n    addRowButton.addEventListener(\"click\", () =>\n      this._table.addColumn(this._table._numberOfColumns)\n    )\n\n    return addRowButton\n  }\n\n  createAddColButton() {\n    const addColumnButton = create(\"div\", [CSS.addColumnButton])\n\n    addColumnButton.addEventListener(\"click\", () => this._table.addRow(this._table._numberOfRows))\n\n    return addColumnButton\n  }\n}\n","import \"./styles/table-constructor.scss\"\nimport { create } from \"./documentUtils\"\nimport { Table } from \"./table\"\nimport { AddLine } from \"./addLine\"\n\n/**\n * Entry point. Controls table and give API to user\n */\nexport class TableConstructor {\n  /**\n   * Creates\n   * @param {TableData} data - previously saved data for insert in table\n   * @param {object} config - configuration of table\n   * @param {object} api - Editor.js API\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor(data, config, api, readOnly) {\n    this.readOnly = readOnly\n\n    this._CSS = {\n      editor: \"tc-editor\",\n      inputField: \"tc-table__inp\",\n      withBorder: \"tc-table__with_border\",\n    }\n\n    /** creating table */\n\n    try {\n      this._table = new Table(config, api, readOnly)\n      this._addLine = new AddLine(this._table)\n      this._drawTable(data, config)\n    } catch (e) {\n      console.error(e)\n    }\n\n    this._container = create(\"div\", [this._CSS.editor, api.styles.block], null, [\n      this._table.htmlElement,\n    ])\n\n    if (!this.readOnly) {\n      this._container.appendChild(this._addLine.createAddRowButton())\n      this._container.appendChild(this._addLine.createAddColButton())\n    }\n  }\n\n  /**\n   * returns html element of TableConstructor;\n   * @return {HTMLElement}\n   */\n  get htmlElement() {\n    return this._container\n  }\n\n  /**\n   * @private\n   *\n   * resize to match config or transmitted data\n   * @param {TableData} data - data for inserting to the table\n   * @param {object} config - configuration of table\n   * @param {number|string} config.rows - number of rows in configuration\n   * @param {number|string} config.cols - number of cols in configuration\n   * @return {{rows: number, cols: number}} - number of cols and rows\n   */\n  _drawTable(data, config) {\n    const isDataValid = !!data && Array.isArray(data.rows) && Array.isArray(data.colgroup)\n    const contentRows = isDataValid ? data.rows.length : undefined\n    const contentCols = isDataValid ? data.colgroup.length : undefined\n    const configRows = Number.parseInt(config.rows)\n    const configCols = Number.parseInt(config.cols)\n    const defaultRows = 3\n    const defaultCols = 2\n    const rows = contentRows || configRows || defaultRows\n    const cols = contentCols || configCols || defaultCols\n    const table = this._table\n\n    if (!isDataValid) {\n      for (let i = 0; i < rows; i++) {\n        table.addRow(i)\n      }\n      for (let i = 0; i < cols; i++) {\n        table.addColumn(i)\n      }\n\n      table.htmlElement.classList.toggle(this._CSS.withBorder, true)\n    } else {\n      table.htmlElement.classList.toggle(this._CSS.withBorder, true)\n      this._table.drawTableFromData(data)\n    }\n\n    return {\n      rows: rows,\n      cols: cols,\n    }\n  }\n}\n"],"sourceRoot":""}